var app=angular.module("thebook",["toastr","ui.bootstrap"]);app.config(function($interpolateProvider,toastrConfig){$interpolateProvider.startSymbol("[[");$interpolateProvider.endSymbol("]]");angular.extend(toastrConfig,{closeButton:true,closeHtml:"<button>&times</button>",positionClass:"toast-bottom-center"})});app.controller("MainController",["$scope","$http","toastr",function($scope,$http,toastr){var self=this;self.email="";self.msg="";self.ongoing=false;self.subscribe=function(){self.ongoing=true;toastr.clear();var f=document["mc-embedded-subscribe-form"];f.method="post";f.action="//thebook.us12.list-manage.com/subscribe/post?u=67bfb17546fcb53eb4c34db5a&amp;id=172d454b10";f.target="_blank";f.submit();setTimeout(function(){self.ongoing=false;self.email=""},500)};self.canSubmit=function(){var filter=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return filter.test(self.email)}}]);app.controller("BannerController",["$scope","$http",function($scope,$http){var self=this;self.rInterval=3e3;function loadJSON(url,callback){var xobj=new XMLHttpRequest;xobj.overrideMimeType("application/json");xobj.open("GET",url,false);xobj.onreadystatechange=function(){if(xobj.readyState==4&&xobj.status=="200"){callback(xobj.responseText)}};xobj.send(null)}function shuffle(array){var tmp,current,top=array.length;if(top){while(--top){current=Math.floor(Math.random()*(top+1));tmp=array[current];tmp.id=top;array[current]=array[top];array[top]=tmp}}return array}self.banners=[];loadJSON("https://thebook.io/banner.json",function(responseText){json=eval(responseText);shuffle(json);self.banners=json})}]);function openSearchOverlay(){const overlay=document.getElementById("search-overlay");overlay.style.height="100%"}function closeSearchOverlay(){const overlay=document.getElementById("search-overlay");overlay.style.height="0%"}
